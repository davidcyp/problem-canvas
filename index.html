<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problem Canvas Builder</title>
    <style>
        @media print {
            .controls, .edit-mode { display: none !important; }
            body { margin: 0; padding: 0; background: white; }
            .canvas { box-shadow: none; margin: 0; }
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .controls {
            max-width: 1200px;
            margin: 0 auto 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #2196f3;
            color: white;
        }
        
        .btn-primary:hover {
            background: #1976d2;
        }
        
        .btn-secondary {
            background: #f5f5f5;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .btn-success {
            background: #4caf50;
            color: white;
        }
        
        .btn-success:hover {
            background: #388e3c;
        }
        
        input[type="file"] {
            display: none;
        }
        
        .canvas-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .canvas {
            width: 100%;
            background: white;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: auto repeat(3, 1fr);
            gap: 12px;
        }
        
        .section {
            border: 2px solid #333;
            padding: 12px;
            background: white;
            display: flex;
            flex-direction: column;
            min-height: 120px;
        }
        
        .header {
            grid-column: 1 / -1;
            background: #1a1a1a;
            color: white;
            padding: 16px 20px;
            border: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header input {
            background: transparent;
            border: none;
            color: white;
            font-size: 28px;
            font-weight: 700;
            flex: 1;
            outline: none;
        }
        
        .header input::placeholder {
            color: rgba(255,255,255,0.5);
        }
        
        .impact-score {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 24px;
            cursor: pointer;
            user-select: none;
        }
        
        .star {
            cursor: pointer;
            transition: transform 0.1s;
        }
        
        .star:hover {
            transform: scale(1.2);
        }
        
        .star.active {
            color: #ffc107;
        }
        
        .star.inactive {
            opacity: 0.3;
        }
        
        .section-title {
            font-weight: 700;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            color: #1a1a1a;
            border-bottom: 2px solid #1a1a1a;
            padding-bottom: 6px;
        }
        
        .section-content {
            font-size: 11px;
            line-height: 1.5;
            flex: 1;
        }
        
        textarea {
            width: 100%;
            height: 100%;
            border: none;
            resize: none;
            font-family: inherit;
            font-size: 11px;
            line-height: 1.5;
            outline: none;
            background: transparent;
        }
        
        .problem-statement { grid-column: 1 / 3; background: #fff5e6; border-color: #ff9800; }
        .context { grid-column: 3 / 5; background: #ffebee; border-color: #e53935; }
        .current-state { grid-column: 1 / 2; }
        .root-causes { grid-column: 2 / 3; background: #f3e5f5; border-color: #9c27b0; }
        .desired-state { grid-column: 3 / 4; background: #e8f5e9; border-color: #4caf50; }
        .impact-areas { grid-column: 4 / 5; }
        .solution-1 { grid-column: 1 / 3; background: #e3f2fd; border-color: #2196f3; }
        .solution-2 { grid-column: 3 / 5; background: #e3f2fd; border-color: #2196f3; }
        .stakeholders { grid-column: 1 / 2; }
        .recommendation { grid-column: 2 / 4; background: #fff9e6; border-color: #ffc107; }
        .next-steps { grid-column: 4 / 5; background: #e8f5e9; border-color: #4caf50; }
        
        .mode-toggle {
            margin-left: auto;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="controls">
        <button class="btn btn-primary" onclick="newCanvas()">üÜï Nieuw Canvas</button>
        <button class="btn btn-secondary" onclick="downloadCanvas()">üíæ Download JSON</button>
        <label class="btn btn-secondary" for="upload">üìÇ Upload JSON</label>
        <input type="file" id="upload" accept=".json" onchange="uploadCanvas(event)">
        <button class="btn btn-success" onclick="window.print()">üñ®Ô∏è Print / PDF</button>
        <span class="mode-toggle">‚úèÔ∏è Edit mode actief</span>
    </div>
    
    <div class="canvas-container">
        <div class="canvas">
            <!-- Header -->
            <div class="header">
                <input type="text" id="title" placeholder="Probleem titel..." value="Testing Lambda & Step Functions">
                <div class="impact-score">
                    <span>Impact:</span>
                    <span id="stars"></span>
                </div>
            </div>
            
            <!-- Row 1 -->
            <div class="section problem-statement">
                <div class="section-title">üéØ Problem Statement</div>
                <div class="section-content">
                    <textarea id="problem" placeholder="Beschrijf het kernprobleem...">We kunnen Lambda's en Step Functions niet adequaat testen voor deployment, wat leidt tot production issues en vertraagde releases.

‚ñ∏ End-to-end testing ontbreekt volledig
‚ñ∏ Lokale test omgeving is niet representatief
‚ñ∏ Issues worden pas in late testing/prod ontdekt
‚ñ∏ Confidence in releases is laag</textarea>
                </div>
            </div>
            
            <div class="section context">
                <div class="section-title">üî• Context - Waarom Nu Urgent?</div>
                <div class="section-content">
                    <textarea id="context" placeholder="Waarom is dit nu urgent?">‚ñ∏ Laatste 2 sprints: 4 critical bugs in productie door ongeteste integraties
‚ñ∏ Planning impact: Gemiddeld 3 dagen vertraging per feature door late discovery
‚ñ∏ Cluster lead: Vertrouwen in delivery capability is zoek
‚ñ∏ Feature theatre: Features "done" maar niet production-ready</textarea>
                </div>
            </div>
            
            <!-- Row 2 -->
            <div class="section current-state">
                <div class="section-title">üì∏ Current State</div>
                <div class="section-content">
                    <textarea id="current" placeholder="Wat zien we nu? (feiten)">‚ñ∏ Unit tests alleen (mocks)
‚ñ∏ Geen staging environment voor AWS services
‚ñ∏ Manual testing in dev account
‚ñ∏ Step Function state machines niet getest

Metrics:
‚Ä¢ Bug escape rate: 65%
‚Ä¢ Rework: ~30% sprint capacity</textarea>
                </div>
            </div>
            
            <div class="section root-causes">
                <div class="section-title">üîç Root Causes</div>
                <div class="section-content">
                    <textarea id="rootcauses" placeholder="Waarom gebeurt dit?">‚ñ∏ Infrastructure: Geen ge√Øsoleerde test AWS accounts
‚ñ∏ Kennis: Team onbekend met AWS testing best practices
‚ñ∏ Tooling: LocalStack setup niet compleet/stabiel
‚ñ∏ Process: DoD checkt niet op integration tests
‚ñ∏ Cultuur: "Test in prod" mindset door gebrek aan alternatieven</textarea>
                </div>
            </div>
            
            <div class="section desired-state">
                <div class="section-title">‚ú® Desired State</div>
                <div class="section-content">
                    <textarea id="desired" placeholder="Hoe zou het eruit moeten zien?">‚ñ∏ Geautomatiseerde e2e tests in CI/CD
‚ñ∏ Confidence score >90% bij deploy
‚ñ∏ Bug escape rate <20%
‚ñ∏ Voorspelbare delivery timelines
‚ñ∏ Self-service test environments

Succes metrics:
‚Ä¢ Zero prod issues door test gaps
‚Ä¢ Test coverage >75%</textarea>
                </div>
            </div>
            
            <div class="section impact-areas">
                <div class="section-title">üí• Impact Op</div>
                <div class="section-content">
                    <textarea id="impact" placeholder="Wat is de impact?">‚ñ∏ Quality: Prod bugs, hotfixes, tech debt
‚ñ∏ Trust: Stakeholder confidence daalt, team morale laag
‚ñ∏ Delivery: Onvoorspelbaar, veel rework
‚ñ∏ Kosten: Wasted effort, overtime
‚ñ∏ DX: Frustratie, fear of deploy</textarea>
                </div>
            </div>
            
            <!-- Row 3 -->
            <div class="section solution-1">
                <div class="section-title">üí° Oplossing 1</div>
                <div class="section-content">
                    <textarea id="solution1" placeholder="Eerste oplossing...">AWS Testing Pipeline
Dedicated test AWS account met automated teardown + Step Functions testing framework

Feasibility: üü¢ Hoog | Effort: üî®üî®üî®

‚ñ∏ Pro: Realistische test omgeving, schaalbaar
‚ñ∏ Pro: Industry standard approach
‚ñ∏ Con: AWS kosten (~‚Ç¨500/maand), setup tijd
‚ñ∏ Vereist: AWS account, IaC, 2 weken dev tijd, training</textarea>
                </div>
            </div>
            
            <div class="section solution-2">
                <div class="section-title">üí° Oplossing 2</div>
                <div class="section-content">
                    <textarea id="solution2" placeholder="Tweede oplossing...">Enhanced LocalStack + Contract Testing
Volledige LocalStack Pro setup + consumer-driven contract tests

Feasibility: üü° Middel | Effort: üî®üî®

‚ñ∏ Pro: Sneller, geen cloud kosten, lokaal development
‚ñ∏ Con: Niet 100% AWS parity, extra maintenance
‚ñ∏ Con: LocalStack Pro license kosten
‚ñ∏ Vereist: LocalStack expertise, 1 week setup, docs</textarea>
                </div>
            </div>
            
            <!-- Row 4 -->
            <div class="section stakeholders">
                <div class="section-title">üë• Stakeholders</div>
                <div class="section-content">
                    <textarea id="stakeholders" placeholder="Wie moet erbij betrokken worden?">‚ñ∏ Beslisser: Cluster Lead + Arch
‚ñ∏ Input: DevOps, Senior devs
‚ñ∏ Owner: Tech Lead
‚ñ∏ Informeren: PO, andere teams</textarea>
                </div>
            </div>
            
            <div class="section recommendation">
                <div class="section-title">üö¶ Aanbeveling</div>
                <div class="section-content">
                    <textarea id="recommendation" placeholder="Wat is de aanbeveling?">Hybride aanpak: Start met Oplossing 1 (AWS test account) voor critical paths, combineer met verbeterde LocalStack voor rapid development.

Rationale: Geeft beste balans tussen betrouwbaarheid en development speed. ROI binnen 6 weken door vermeden production issues.</textarea>
                </div>
            </div>
            
            <div class="section next-steps">
                <div class="section-title">üìã Next Steps</div>
                <div class="section-content">
                    <textarea id="nextsteps" placeholder="Concrete acties...">‚ñ∏ Workshop team: testing strategy (deze week)
‚ñ∏ AWS test account aanvragen (Frederik)
‚ñ∏ PoC Step Functions testing framework (Sprint +1)
‚ñ∏ DoD update: integratie tests verplicht
‚ñ∏ Retro: wat moet anders in gedrag/proces?</textarea>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentRating = 5;
        
        function renderStars() {
            const starsEl = document.getElementById('stars');
            starsEl.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.className = 'star ' + (i <= currentRating ? 'active' : 'inactive');
                star.textContent = '‚≠êÔ∏è';
                star.onclick = () => setRating(i);
                starsEl.appendChild(star);
            }
        }
        
        function setRating(rating) {
            currentRating = rating;
            renderStars();
        }
        
        function getCanvasData() {
            return {
                title: document.getElementById('title').value,
                rating: currentRating,
                problem: document.getElementById('problem').value,
                context: document.getElementById('context').value,
                current: document.getElementById('current').value,
                rootcauses: document.getElementById('rootcauses').value,
                desired: document.getElementById('desired').value,
                impact: document.getElementById('impact').value,
                solution1: document.getElementById('solution1').value,
                solution2: document.getElementById('solution2').value,
                stakeholders: document.getElementById('stakeholders').value,
                recommendation: document.getElementById('recommendation').value,
                nextsteps: document.getElementById('nextsteps').value
            };
        }
        
        function setCanvasData(data) {
            document.getElementById('title').value = data.title || '';
            currentRating = data.rating || 3;
            document.getElementById('problem').value = data.problem || '';
            document.getElementById('context').value = data.context || '';
            document.getElementById('current').value = data.current || '';
            document.getElementById('rootcauses').value = data.rootcauses || '';
            document.getElementById('desired').value = data.desired || '';
            document.getElementById('impact').value = data.impact || '';
            document.getElementById('solution1').value = data.solution1 || '';
            document.getElementById('solution2').value = data.solution2 || '';
            document.getElementById('stakeholders').value = data.stakeholders || '';
            document.getElementById('recommendation').value = data.recommendation || '';
            document.getElementById('nextsteps').value = data.nextsteps || '';
            renderStars();
        }
        
        function downloadCanvas() {
            const data = getCanvasData();
            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `problem-canvas-${data.title.replace(/[^a-z0-9]/gi, '-').toLowerCase()}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function uploadCanvas(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    setCanvasData(data);
                } catch (err) {
                    alert('Error loading file: ' + err.message);
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }
        
        function newCanvas() {
            if (confirm('Weet je zeker dat je een nieuw canvas wilt starten? Sla eerst je huidige canvas op!')) {
                setCanvasData({
                    title: '',
                    rating: 3,
                    problem: '',
                    context: '',
                    current: '',
                    rootcauses: '',
                    desired: '',
                    impact: '',
                    solution1: '',
                    solution2: '',
                    stakeholders: '',
                    recommendation: '',
                    nextsteps: ''
                });
            }
        }
        
        // Initialize
        renderStars();
    </script>
</body>
</html>